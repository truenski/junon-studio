---
import type { CollectionEntry } from "astro:content";
import { render } from "astro:content";
import CodeBlock from "./CodeBlock.astro";
import ExampleBlock from "./ExampleBlock.astro";

interface Props {
  command: CollectionEntry<"commands">;
}

const { command } = Astro.props;
const { Content } = await render(command);
const { data } = command;
---

<article class="mb-8">
  <h1 class="text-3xl font-bold mb-4">{data.name}</h1>
  
  <div class="mb-4">
    <span class="text-xs uppercase text-white/50 bg-white/5 px-2 py-1 rounded">
      {data.category}
    </span>
  </div>

  <p class="text-white/80 mb-6">{data.description}</p>

  {data.syntax && data.syntax.length > 0 && (
    <div class="mb-6">
      <h2 class="text-xl font-bold mb-3">Syntax</h2>
      {data.syntax.map((syntax) => (
        <div class="mb-2">
          <CodeBlock code={syntax} />
        </div>
      ))}
    </div>
  )}

  {data.args && data.args.length > 0 && (
    <div class="mb-6">
      <h2 class="text-xl font-bold mb-3">Arguments</h2>
      <div class="space-y-2">
        {data.args.map((arg) => (
          <div class="border border-white/10 rounded p-3">
            <div class="flex items-center gap-2 mb-1">
              <code class="text-sm font-mono">{arg.name}</code>
              <span class="text-xs text-white/50">({arg.type})</span>
              {arg.required && (
                <span class="text-xs bg-white/10 px-2 py-0.5 rounded">required</span>
              )}
            </div>
            <p class="text-sm text-white/70">{arg.description}</p>
          </div>
        ))}
      </div>
    </div>
  )}

  {data.examples && data.examples.length > 0 && (
    <div class="mb-6">
      <h2 class="text-xl font-bold mb-3">Examples</h2>
      {data.examples.map((example) => (
        <ExampleBlock code={example.code} description={example.description} />
      ))}
    </div>
  )}

  <div class="prose prose-invert max-w-none">
    <Content />
  </div>
</article>

